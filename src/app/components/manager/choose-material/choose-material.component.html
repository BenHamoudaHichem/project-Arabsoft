<title translate> titles.add_inter </title>


<section class="h-100 ">
  <div class="container py-5">
    <div class="row ">
      <div class="col">
        <div class="card">
          <div class="logo">
            <div class="card-title">
              <span><img src="assets/images/gest.png" alt="Sample photo" height="60px" width="100px" /></span>
            </div>
            <span class="title" translate>titles.add_inter</span>

          </div>

          <form [formGroup]="materialForm" (ngSubmit)="create()">
            <table class="table table-hover">
              <thead>
                <tr class="table-primary">
                  <th scope="col">Materièl</th>
                  <th scope="col">Quantité total</th>
                  <th scope="col">Quantité à choisir</th>
                  <th scope="col">Mesure</th>
                  <th scope="col">Supprimé ?</th>
                </tr>
              </thead>
              <tbody formArrayName="materialsUsed">
                <tr class="table-light" *ngFor="let item of materialsUsed.controls; let i=index" [formGroupName]="i">
                  <td scope="row">
                    <ng-multiselect-dropdown formControlName="material" [placeholder]="'input.msg.mat_select'|translate"
                    [settings]="dropdownSettings" [data]="materialsList" (onSelect)="onItemSelect($event)"
                    (onSelectAll)="onSelectAll($event)" >
                  </ng-multiselect-dropdown> <p *ngIf="(material(i)?.touched || material(i)?.dirty) && !material(i)?.valid" class="ErrorMsg" translate>
                    errors.req_error
                  </p>
                  <div *ngIf="materialsList?.length==0">

                    <a class="nullValueLink" routerLink="/dashboard/manager/addMaterial" translate>titles.add_material
                    </a>
                  </div>
                </td>
                  <td name="total">0</td>
                  <td><input name="value" type="number" step="any" min="0" formControlName="quantity"
                  class="form-control form-control-lg" />
                <p *ngIf="
                  (quantity(i)?.touched || quantity(i)?.dirty) &&
                  !quantity(i)?.valid
                " class="ErrorMsg" translate>
                  errors.req_error
                </p></td>
                  <td>            <div class="input-group">
                    <div class="input-group-prepend">
                      <label class="input-group-text" style="padding: 10px 5px;margin: 10px 0px;" for="inputGroupSelect01">mesure</label>
                    </div>
                    <select class="custom-select" id="inputGroupSelect01" formControlName="measure">
                      <option *ngFor="let item of measureList" [value]="item.value">{{item.key}}</option>

                    </select>
                    <p *ngIf="
                    (measure(i)?.touched || measure(i)?.dirty) &&
                    !measure(i)?.valid
                  " class="ErrorMsg" translate>
                      errors.req_error
                    </p>

                  </div>
                </td>
                <td>  <div class="d-flex justify-content-center pt-3">
                  <img (click)="removeMaterialUsed(i)"  src="assets/images/remove.png" height="60px" width="60px" alt="remove">
                  &nbsp;&nbsp;
                   </div>
                  </td>
                </tr>
                </tbody>
                </table>
            <div class="d-flex justify-content-center">
              <img (click)="addMaterialUsed()" src="assets/images/add.png" height="60px" width="60px" alt="add">

            </div>
            <div class="d-flex justify-content-center">

              <div class="d-flex justify-content-end pt-3">

                <button class="bn632-hover bn24" (click)="back()" translate>buttons.back</button>

              </div>
              <div class="d-flex justify-content-start pt-3" >

                <button class="bn632-hover bn24" type="submit" [disabled]="!materialForm.valid">buttons.create</button>

              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</section>
